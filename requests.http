# Sleeper Backend API Endpoints
# Call /api/ktc/refresh/all first when running the project for the first time. Then other refresh routes to populate data

# Environment Variables
# Set BASE_URL to http://localhost:5000 for local development
# Set BASE_URL to https://sleeper-backend.vercel.app for production
@BASE_URL = http://localhost:5000

### Health Check
GET {{BASE_URL}}/api/ktc/health

### ============================================================================
### SLEEPER PLAYER ENDPOINTS (FOUNDATION - RUN FIRST)
### ============================================================================

### Refresh Sleeper player data (FOUNDATION - takes 30-60 seconds)
POST {{BASE_URL}}/api/sleeper/refresh
# POST https://sleeper-backend.vercel.app/api/sleeper/refresh

### ============================================================================
### SLEEPER LEAGUE ENDPOINTS - Both POST and PUT methods available
### ============================================================================

### Update league data (2025 league)
PUT {{BASE_URL}}/api/sleeper/league/1210364682523656192
# PUT https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192

### Refresh league data (2025 league)
POST {{BASE_URL}}/api/sleeper/league/1210364682523656192
# POST https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192

### Get comprehensive league data (2025 league)
GET {{BASE_URL}}/api/sleeper/league/1210364682523656192
# GET https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192

### Get league rosters (2025 league)
GET {{BASE_URL}}/api/sleeper/league/1210364682523656192/rosters
# GET https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192/rosters

### Get league users (2025 league)
GET {{BASE_URL}}/api/sleeper/league/1210364682523656192/users
# GET https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192/users

### ============================================================================
### SLEEPER RESEARCH ENDPOINTS - Both POST and PUT methods available
### ============================================================================

### Update player research data (2025 season)
PUT {{BASE_URL}}/api/sleeper/players/research/2025
# PUT https://sleeper-backend.vercel.app/api/sleeper/players/research/2025

### Refresh player research data (2025 season)
POST {{BASE_URL}}/api/sleeper/players/research/2025
# POST https://sleeper-backend.vercel.app/api/sleeper/players/research/2025

### Get player research data (2025 season)
GET {{BASE_URL}}/api/sleeper/players/research/2025
# GET https://sleeper-backend.vercel.app/api/sleeper/players/research/2025

### Get player research data (2024 season)
GET {{BASE_URL}}/api/sleeper/players/research/2024
# GET https://sleeper-backend.vercel.app/api/sleeper/players/research/2024

### Get player research data (2024 season, week 10)
GET {{BASE_URL}}/api/sleeper/players/research/2024?week=10
# GET https://sleeper-backend.vercel.app/api/sleeper/players/research/2024?week=10

### Get player research data (2024 season, redraft)
GET {{BASE_URL}}/api/sleeper/players/research/2024?league_type=1
# GET https://sleeper-backend.vercel.app/api/sleeper/players/research/2024?league_type=1

### Update player research data (2024 season)
PUT {{BASE_URL}}/api/sleeper/players/research/2024
# PUT https://sleeper-backend.vercel.app/api/sleeper/players/research/2024

### Refresh player research data (2024 season)
POST {{BASE_URL}}/api/sleeper/players/research/2024
# POST https://sleeper-backend.vercel.app/api/sleeper/players/research/2024

### Update player research data (2024 season, week 17)
PUT {{BASE_URL}}/api/sleeper/players/research/2024?week=17
# PUT https://sleeper-backend.vercel.app/api/sleeper/players/research/2024?week=17

### Refresh player research data (2024 season, week 17)
POST {{BASE_URL}}/api/sleeper/players/research/2024?week=17
# POST https://sleeper-backend.vercel.app/api/sleeper/players/research/2024?week=17

### Update league data (2024 league)
PUT {{BASE_URL}}/api/sleeper/league/1210364682523656192
# PUT https://sleeper-backend.vercel.app/api/sleeper/league/1050831680350568448

### Refresh league data (2024 league)
POST {{BASE_URL}}/api/sleeper/league/1210364682523656192
# POST https://sleeper-backend.vercel.app/api/sleeper/league/1050831680350568448

### ============================================================================
### SLEEPER WEEKLY STATS ENDPOINTS - Both POST and PUT methods available
### ============================================================================

### Seed league stats (2024 league)
POST {{BASE_URL}}/api/sleeper/league/1210364682523656192/stats/seed
# POST https://sleeper-backend.vercel.app/api/sleeper/league/1050831680350568448/stats/seed
Content-Type: application/json

{
  "league_name": "Salt Factory",
  "season": "2025",
  "league_type": "dynasty"
}

### Update weekly stats (2025 league, week 1)
PUT {{BASE_URL}}/api/sleeper/league/1210364682523656192/stats/week/1?season=2025&league_type=dynasty
# PUT https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192/stats/week/1?season=2025&league_type=dynasty

### Refresh weekly stats (2025 league, week 1)
POST {{BASE_URL}}/api/sleeper/league/1210364682523656192/stats/week/1?season=2025&league_type=dynasty
# POST https://sleeper-backend.vercel.app/api/sleeper/league/1210364682523656192/stats/week/1?season=2025&league_type=dynasty

### Get weekly stats (2024 league, week 1)
GET {{BASE_URL}}/api/sleeper/league/1050831680350568448/stats/week/1?season=2024&league_type=dynasty
# GET https://sleeper-backend.vercel.app/api/sleeper/league/1050831680350568448/stats/week/1?season=2024&league_type=dynasty

### Get weekly stats with averages (2024 league, week 1)
GET {{BASE_URL}}/api/sleeper/league/1050831680350568448/stats/week/1?season=2024&league_type=dynasty&average=true
# GET https://sleeper-backend.vercel.app/api/sleeper/league/1050831680350568448/stats/week/1?season=2024&league_type=dynasty&average=true

### ============================================================================
### KTC ENDPOINTS (RUN AFTER SLEEPER - merges into existing players)
### Both POST and PUT endpoints available
### ============================================================================

### Refresh all KTC data (merges into existing Sleeper players - takes 5-10 seconds)
POST {{BASE_URL}}/api/ktc/refresh/all 
# POST https://sleeper-backend.vercel.app/api/ktc/refresh/all

### Update KTC rankings (specific configuration - dynasty superflex TEP)
PUT {{BASE_URL}}/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=superflex
# PUT https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=superflex

### Refresh KTC rankings (specific configuration - dynasty superflex TEP)
POST {{BASE_URL}}/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=superflex
# POST https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=superflex

### Update KTC rankings (dynasty 1QB with TEP)
PUT {{BASE_URL}}/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=1qb
# PUT https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=1qb

### Refresh KTC rankings (dynasty 1QB with TEP)
POST {{BASE_URL}}/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=1qb
# POST https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=tep&is_redraft=false&league_format=1qb

### Update KTC rankings (redraft superflex)
PUT {{BASE_URL}}/api/ktc/refresh?tep_level=&is_redraft=true&league_format=superflex
# PUT https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=&is_redraft=true&league_format=superflex

### Refresh KTC rankings (redraft superflex)
POST {{BASE_URL}}/api/ktc/refresh?tep_level=&is_redraft=true&league_format=superflex
# POST https://sleeper-backend.vercel.app/api/ktc/refresh?tep_level=&is_redraft=true&league_format=superflex



### *** Get KTC rankings (dynasty superflex with TEP) ***
GET {{BASE_URL}}/api/ktc/rankings?tep_level=tep&is_redraft=false&league_format=superflex
# GET https://sleeper-backend.vercel.app/api/ktc/rankings?tep_level=tep&is_redraft=false&league_format=superflex

### Get KTC rankings (dynasty 1QB with TEP)
GET {{BASE_URL}}/api/ktc/rankings?tep_level=tep&is_redraft=false&league_format=1qb
# GET https://sleeper-backend.vercel.app/api/ktc/rankings?tep_level=tep&is_redraft=false&league_format=1qb

### Get KTC rankings (redraft superflex)
GET {{BASE_URL}}/api/ktc/rankings?tep_level=&is_redraft=true&league_format=superflex
# GET https://sleeper-backend.vercel.app/api/ktc/rankings?tep_level=&is_redraft=true&league_format=superflex

### Get KTC rankings (dynasty 1QB base)
GET {{BASE_URL}}/api/ktc/rankings?tep_level=&is_redraft=false&league_format=1qb
# GET https://sleeper-backend.vercel.app/api/ktc/rankings?tep_level=&is_redraft=false&league_format=1qb

### ============================================================================
### Cleanup KTC database
POST {{BASE_URL}}/api/ktc/cleanup?tep_level=tep&is_redraft=false&league_format=superflex
# POST https://sleeper-backend.vercel.app/api/ktc/cleanup?tep_level=tep&is_redraft=false&league_format=superflex

### ============================================================================
### REFERENCE DATA
### ============================================================================

# League IDs:
# 2024 league_id: 1050831680350568448
# 2025 league_id: 1210364682523656192
# User ID: 736083244801474560

# Parameter Options:
# league_format: "1qb" | "superflex"
# tep_level: "" | "tep" | "tepp" | "teppp"
# is_redraft: "true" | "false"
# league_type: 1 (redraft) | 2 (dynasty)
